CREATE KEYSPACE historicaldata
  WITH REPLICATION = { 'class' : 'SimpleStrategy', 'replication_factor' : 3 };

CREATE TABLE historicaldata.stocks (
  stockid text,
  trading_time timestamp,
  name text,
  bid decimal,
  offer decimal,
  volume int,
  PRIMARY KEY (stockid, trading_time)
)
WITH CLUSTERING ORDER BY (trading_time DESC);

ALTER TABLE historicaldata.stocks WITH compaction = {'class': 'DateTieredCompactionStrategy', 'timestamp_resolution':'MICROSECONDS', 'base_time_seconds':'3600', 'max_sstable_age_days':'31'};

CREATE TABLE historicaldata.indicators (
  indicatorid text,
  trading_time timestamp,
  value decimal,
  PRIMARY KEY (indicatorid, trading_time)
)
WITH CLUSTERING ORDER BY (trading_time DESC);

ALTER TABLE historicaldata.indicators WITH compaction = {'class': 'DateTieredCompactionStrategy', 'timestamp_resolution':'MICROSECONDS', 'base_time_seconds':'3600', 'max_sstable_age_days':'31'};

CREATE TABLE historicaldata.signals (
  signalid text,
  trading_time timestamp,
  value int,
  PRIMARY KEY (signalid, trading_time)
)
WITH CLUSTERING ORDER BY (trading_time DESC);

ALTER TABLE historicaldata.signals WITH compaction = {'class': 'DateTieredCompactionStrategy', 'timestamp_resolution':'MICROSECONDS', 'base_time_seconds':'3600', 'max_sstable_age_days':'31'};
